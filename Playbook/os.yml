- name: Lấy thông tin phiên bản hệ điều hành của các máy chủ
  hosts: controller, host
  gather_facts: yes

  tasks:
    - name: Kiểm tra thông tin OS
      debug:
        var: ansible_os_family

    - name: Kiểm tra thông tin phân phối
      debug:
        var: ansible_distribution

    - name: Kiểm tra phiên bản phân phối
      debug:
        var: ansible_distribution_version

    - name: Hiển thị thông tin phiên bản hệ điều hành cho Linux
      debug:
        msg: "Hệ điều hành: {{ ansible_distribution }} {{ ansible_distribution_version }}"
      when: ansible_os_family in ["Linux", "Debian"]  # Thay đổi điều kiện

    - name: Hiển thị thông tin phiên bản hệ điều hành cho Windows
      debug:
        msg: "Hệ điều hành: {{ ansible_distribution }} {{ ansible_version }}"
      when: ansible_os_family == "Windows"
