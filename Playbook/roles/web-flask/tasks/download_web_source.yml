- name: Tải về file ZIP chứa toàn bộ repository từ GitHub
  ansible.builtin.command:
    cmd: "curl -L -o /tmp/repo.zip https://github.com/candi2002/Ansible/archive/refs/heads/main.zip"

- name: Giải nén file ZIP vào thư mục đích
  ansible.builtin.unarchive:
    src: /tmp/repo.zip
    dest: /opt/flask_web/
    remote_src: yes

- name: Di chuyển thư mục upload-img vào vị trí mong muốn
  ansible.builtin.command:
    cmd: "mv /opt/flask_web/Ansible-main/upload-img /opt/flask_web/upload-img"

- name: Xóa file ZIP sau khi giải nén
  ansible.builtin.file:
    path: /tmp/repo.zip
    state: absent

- name: Xóa thư mục Ansible sau khi lấy xong
  ansible.builtin.file:
    path: /opt/flask_web/Ansible-main
    state: absent
